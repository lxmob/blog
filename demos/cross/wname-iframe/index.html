<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>page1</title>
  </head>
  <body>
    当前页面是http://test.baidu.com/index.html
  </body>
  <script>
    var flag = false

    var iframe = document.createElement('iframe')
    var getData = function () {
      if (flag) {
        var data = iframe.contentWindow.name
        console.log(JSON.parse(data))
      } else {
        flag = true
        setTimeout(function () {
          iframe.contentWindow.location = './index2.html'
        }, 600)
      }
    }
    iframe.src = 'http://zhidao.baidu.com/index3.html'

    // 兼容性
    if (iframe.attachEvent) {
      iframe.attachEvent('onload', getData)
    } else {
      iframe.onload = getData
    }
    document.body.appendChild(iframe)
  </script>
</html>
