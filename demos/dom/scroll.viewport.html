<!-- <!DOCTYPE html> -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ»šåŠ¨æ¡ã€è§†å£ã€é¡µé¢ã€å…¼å®¹æ€§</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        list-style: none;
      }
      #app {
        position: relative;
      }
      .box {
        position: absolute;
        /* margin: 100px; */
        width: 200px;
        height: 300px;
        left: 100px;
        top: 100px;
        background-color: green;
      }
      .inner-box {
        position: absolute;
        /* margin: 100px; */
        left: 100px;
        top: 100px;
        width: 80px;
        height: 80px;
        background-color: pink;
      }
    </style>
  </head>
  <body>
    <div id="app" style="width: 5000px; height: 5000px; border: 1px solid #000">
      <div class="box">
        <div class="inner-box"></div>
      </div>
    </div>
  </body>
  <script>
    // æµè§ˆå™¨å…¼å®¹çš„æ€ªå¼‚æ¨¡å¼å’Œæ ‡å‡†æ¨¡å¼
    // <!DOCTYPE html> è¿™ä¸€è¡Œä»£ç è¦æ±‚æµè§ˆå™¨å…¼å®¹ w3c çš„è§„èŒƒï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰
    // å¦‚æœä¸å†™åˆ™ä½¿ç”¨æµè§ˆå™¨å‚å•†è‡ªå·±çš„å…¼å®¹æ¨¡å¼ï¼ˆæ€ªå¼‚æ¨¡å¼ï¼‰ï¼Œé€šå¸¸æµè§ˆå™¨éƒ½ä¼šå‘åå…¼å®¹è‡ªå·±5ä¸ªç‰ˆæœ¬
    console.log(document.compatMode) // CSS1Compat -> w3cï¼ŒBackCompat -> æ€ªå¼‚

    // ğŸŒŸ æ»šåŠ¨æ¡æ»šå‡ºè·ç¦»å±æ€§ï¼šå¸¸è§„ä½¿ç”¨ window.pageXOffset/pageYOffset
    console.log(window.pageXOffset, window.pageYOffset)
    // å…¼å®¹æ€§é—®é¢˜ï¼ŒIE9/IE8åŠä»¥ä¸‹éœ€è¦ä½¿ç”¨ï¼š
    // document.body.scrollLeft/scrollTop
    // document.documentElement.scrollLeft/scrollTop
    // ä¸¤è€…åœ¨ IE6789 æ ‡å‡†æ¨¡å¼å’Œæ€ªå¼‚æ¨¡å¼ä¸‹åˆ†åˆ«äº’æ–¥ï¼ˆæ ‡å‡†æ¨¡å¼ä¸‹ä¸€æ–¹å¯ç”¨ä¸€æ–¹ä¸å¯ç”¨ï¼‰
    function getScrollOffset() {
      if (window.pageXOffset) {
        return { left: window.pageXOffset, top: window.pageYOffset }
      } else {
        return {
          left: document.body.scrollLeft + document.documentElement.scrollLeft,
          top: document.body.scrollTop + document.documentElement.scrollTop,
        }
      }
    }
    // ä¸å¸¸è§çš„ window.scrollY/scrollX

    // ğŸŒŸ æµè§ˆå™¨å¯è§†åŒºåŸŸçš„å°ºå¯¸ï¼ˆè§†å£ï¼‰window.innerHeight/innerWidth
    console.log(window.innerHeight, window.innerWidth)
    // å…¼å®¹æ€§é—®é¢˜ï¼ŒIE9/IE8åŠä»¥ä¸‹éœ€è¦ä½¿ç”¨ï¼š
    // æ ‡å‡† document.documentElement.clientHeight/clientWidth
    // æ€ªå¼‚ document.body.clientHeight/clientWidth
    function getViewportSize() {
      if (window.innerHeight) {
        return { width: window.innerWidth, height: window.innerHeight }
      } else {
        var isW3C = document.compatMode === 'CSS1Compat'
        return {
          width: document[isW3C ? 'documentElement' : 'body'].clientWidth,
          height: document[isW3C ? 'documentElement' : 'body'].clientHeight,
        }
      }
    }
    // æµè§ˆå™¨æ•´ä½“å®½é«˜ window.outerHeight/outerWidth

    // ğŸŒŸ é¡µé¢æ•´ä½“å®½é«˜å±æ€§ï¼š
    // è§†å£çš„è·ç¦» + æ»šåŠ¨æ¡çš„è·ç¦» = é¡µé¢æ•´ä½“å®½é«˜
    // window.innerWidth + window.pageXOffset = document.documentElement.scrollWidth / document.body.scrollWidth
    // window.innerHeight + window.pageYOffset = document.documentElement.scrollHeight / document.body.scrollHeight
    // å…¼å®¹é—®é¢˜ï¼ŒIE567æ”¯æŒ documentElement
    function getScrollSize() {
      var isIE567 = !!document.body.scrollHeight
      return {
        width: document[isIE567 ? 'documentElement' : 'body'].scrollWidth,
        height: document[isIE567 ? 'documentElement' : 'body'].scrollHeight,
      }
    }

    // ğŸŒ¿ getBoundingClientRect è·å–å…ƒç´ è·ç¦»è§†å£0,0ç‚¹ä½ç½®ä¿¡æ¯
    // å…¼å®¹é—®é¢˜ï¼šIEä¸­æ— æ³•è·å–å®½é«˜å±æ€§
    // ç¼ºç‚¹ï¼šä¸å®æ—¶
    var boxNode = document.getElementsByClassName('box')[0],
      rectInfo = boxNode.getBoundingClientRect()
    boxNode.style.width = '300px'
    console.log(rectInfo) // width: 200

    // ğŸŒŸ å…ƒç´ ä½ç½®ä¿¡æ¯å±æ€§
    // offsetLeft offsetTop ä¼šæ ¹æ®å…ƒç´ çš„çˆ¶çº§å®šä½å¼€å§‹ç®—ï¼Œå¦‚æœå…ƒç´ çˆ¶çº§æ²¡æœ‰å®šä½åˆ™å‘ä¸Šæ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°è§†å£0,0ç‚¹ä½ç½®
    var innerNode = boxNode.getElementsByClassName('inner-box')[0]
    console.log(innerNode.offsetLeft, innerNode.offsetTop)
    // offsetParent å–å…ƒç´ å…·æœ‰å®šä½çš„çˆ¶çº§å…ƒç´ ï¼Œä¸€ç›´æ‰¾åˆ°body
    console.log(innerNode.offsetParent)
    // ğŸŒ° å°è£…ä¸€ä¸ªæ–¹æ³•è·å–å…ƒç´ è·ç¦»è§†å£çš„è·ç¦»
    function getElemClientRect(el) {
      var parent = el.offsetParent,
        offsetLeft = el.offsetLeft,
        offsetTop = el.offsetTop

      while (parent) {
        offsetLeft += parent.offsetLeft
        offsetTop += parent.offsetTop
        parent = parent.offsetParent
      }
      return { top: offsetTop, left: offsetLeft }
    }

    // ğŸŒŸ è®¾ç½®æ»šåŠ¨æ¡æ»šåŠ¨çš„è·ç¦»
    // æ»šåŠ¨æ–‡æ¡£ä¸­æŸä¸ªä½ç½® window.scroll(x, y) window.scrollTo(x, y)
    // ç´¯åŠ æ»šåŠ¨æ–‡æ¡£ window.scrollBy(x, y)
    window.scroll(500, 500)
    window.scrollTo(1000, 1000)
    window.scrollBy(100, 100) // æ¡ˆä¾‹ï¼šçœ‹å°è¯´è‡ªåŠ¨æ»šåŠ¨è·ç¦»
  </script>
</html>
