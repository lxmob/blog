<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS运算符</title>
  </head>
  <body></body>

  <!-- 赋值运算，依次从右向左赋值 -->
  <script>
    var x = (y = z = 1);
    console.log(x, y, z); // 1 1 1
    var x = 1,
      y = (z = 1);
    console.log(x, y, z); // 1 1 1
  </script>

  <!-- 优先级：括号运算 > 普通运算 > 赋值运算 -->
  <script>
    var a = 1,
      b = 2,
      d = 3;
    var c = (a + b) * d;
    console.log(c);
  </script>

  <!-- 加法运算 -->
  <script>
    var d = "str" + 1 + 1;
    console.log(d); // str11 字符串类型
    var c = 1 + 1 + "str" + 1 + undefined;
    console.log(c); // 2str1undefined 字符串类型

    // 隐式转换
    var a = null,
      b = 2;
    console.log(a + b); // Number(0) + 2 = 2;
    console.log(c + "1"); // 未定义 Uncaught ReferenceError: c is not defined
  </script>

  <!-- 除法运算 -->
  <script>
    console.log(0 / 0); // NaN
    console.log(1 / 0); // Infinity
    console.log(-1 / 0); // -Infinity
    console.log("str" / 0); // NaN
    console.log(0 / 2); // 0
    console.log(-0 / 1); // -0

    // 隐式转换
    console.log("1" / 1); // 1
    console.log(null / 1); // 0
    console.log("null" / 1); // NaN
    console.log(true / 1); // 1
    console.log("true" / 1); // NaN
  </script>

  <!-- 模运算取余数 -->
  <script>
    console.log(0 % 0); // NaN;
    console.log(0 % 1); // 0;
    console.log(1 % 0); // NaN;
    console.log(true % 0); // NaN;
    console.log("str" % 0); // NaN;
    console.log(NaN % NaN); // NaN;
    console.log(1 % NaN); // NaN;
    console.log(Infinity % Infinity); // NaN;
    console.log(Infinity % -Infinity); // NaN;
  </script>

  <!-- 变量交换值 -->
  <script>
    var a = 1,
      b = 2;
    var c = a,
      a = b,
      b = c;

    // 不创建新的变量实现交换值
    var a = a + b,
      b = a - b,
      a = a - b;
  </script>

  <!-- 自增自减运算符 ++/-- -->
  <script>
    var a = 1;
    console.log(a++); // 1 先输出，后运算，返回原本的值，变更栈内存记录值
    console.log(++a); // 2 先运算，后输出，返回新的值，变更栈内存记录值

    var a = 5,
      b;
    b = a++ + 1;
    console.log(b, a); // 6 6

    b = a-- + --a;
    console.log(b, a); // 8 3

    b = --a + --a;
    console.log(b, a); // 7 3
  </script>

  <!-- 比较运算符 > < >= <= == != === !== -->
  <script>
    var bol = 1 > 2; // 比较 number - number
    bol = 1 > "2"; // 比较 number - string  string -> number
    bol = "1" > "2"; // 比较的是 ASCII 码 string - string

    bol = 1 == "1"; // true
    bol = 1 === "1"; // false 严格判等比较类型
    bol = NaN == NaN; // false NaN与任何都不相等包含自身
  </script>

  <!-- 逻辑运算 && || ! -->
  <script>
    var a = 1;
    b = a && 2; // 遇到真就往后走，遇到假或走到最后就返回当前值
    b = 1 && 2 && undefined && a; // undefined

    var a = 1;
    b = a || true; // 遇到假就往后走，遇到真或走到最后就返回当前值
    b = 0 || null || 1 || 0; // 1

    var a = false;
    a = !a; // 取反
  </script>

  <!-- 逗号运算符，从左到右求值，并返回最后一个操作数的值 -->
  <script>
    var num = (1, 2);
    console.log(num); // 2

    var fn = (function test() {
      return 1;
    },
    function demo() {
      return "2";
    })();
    console.log(typeof fn); // 'string'
  </script>

  <!-- 
    括号表达式
    包裹括号的都为表达式，单个括号没有值则为函数的执行符号
  -->
  <script>
    var a = 10
    // 这里将解析为 (function b() {}) 将忽略函数名
    if (function b() {}) {
      a += typeof b
    }
    console.log(a) // 10undefined

    function foo1(x) {
      console.log(arguments) // 1 2 3 4 5
      return x
    }
    foo1(1, 2, 3, 4, 5)

    function foo2(x) {
      console.log(arguments) // 5
      return x
    }(1, 2, 3, 4, 5)
        
    ;(function foo3(x) {
      console.log(arguments) // 1 2 3 4 5
      return x
    })(1, 2, 3, 4, 5)
  </script>
</html>
