<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>函数的作用域与作用域链</title>
  </head>
  <body>
    <!--
      作用域其实就是一个执行期上下文，变量可访问作用的范围。
      作用域有全局执行期上下文 GO，函数执行期上下文 AO，函数执行完毕后 AO 是要销毁的，遵循即时性原则。
      对象中有一些属性是无法访问的，属于 js 引擎内部固有的隐式属性 [[scope]] 代表作用域，函数也是一种对象类型，函数的作用域如何产生？

      1. 当一个函数定义时，生成一个 js 内部的隐式属性 [[scope]] 用来存储作用域链的容器。
      2. 作用域链（栈结构）的第一项值指向的是 GO 全局执行期上下文。
      3. 在函数执行前，作用域链顶端第一项是 AO 函数执行期上下文，第二项是 GO，查找变量的规则从顶端依次向下查找。
      4. 在函数执行完毕后，对应函数的 AO 将会被销毁。
    -->
  </body>

  <script>
    var a = 1;
    function fn() {
      var a = 10;
      function fn1() {
        var a = 20;
        console.log(a); // 20
      }
      function fn2() {
        console.log(a); // 10
      }
      fn1();
      fn2();
    }
    fn();
    console.log(a); // 1
  </script>
</html>
