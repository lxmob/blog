<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>类数组对象</title>
  </head>
  <body></body>
  <!-- 类数组没有继承 Array.prototype 是不具备数组方法 -->
  <script>
    var allDiv = document.getElementsByTagName("div");
    console.log(allDiv); // 类数组对象

    function classArr() {
      console.log(arguments); // 类数组对象
    }
    classArr(1, 2, 3, 4);
  </script>

  <!-- 类数组对象（题） -->
  <script>
    var simObjArr = {
      2: 3,
      3: 4,
      length: 2,
      push: Array.prototype.push,
      splice: Array.prototype.splice,
    };
    simObjArr.push(1);
    simObjArr.push(2);
    console.log(simObjArr); // Object(4) [empty × 2, 1, 2, push: ƒ, splice: ƒ]
  </script>

  <!-- 理解 push 方法在底层做了什么事 -->
  <script>
    Array.prototype.push = function (elem) {
      this[this.length] = elem;
      this.length++;
    };
  </script>

  <!-- 
    创建一个类数组继承数组身上的方法，即可以是对象也可以是数组。
    创建类属性的条件：
      1. 需要具备下标属性。
      2. 需要具备 length 属性且与下标末尾对应。
      3. 需要继承来自 Array.prototype 的 push、splice 方法。
  -->
  <script>
    var classObjArr = {
      0: "类数组",
      1: "数组方法",
      2: "对象属性",
      name: "classArr",
      options: "config",
      length: 3,
      push: Array.prototype.push,
      splice: Array.prototype.splice,
    };
    console.log(classObjArr[2]); // 对象属性
    console.log(classObjArr[1]); // 数组方法
    console.log(classObjArr.length); // 3
  </script>
</html>
