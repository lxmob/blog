<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>迭代数组的方法</title>
  </head>
  <body></body>

  <!-- 
    Array.prototype.find(fn, this) 
    fn = function (elem, idx, arr) { }
      elem = 数组中当前正在处理的元素
      idx = 正在处理元素的下标索引
      arr = 调用了 find 方法的数组本身
    查找元素满足测试函数第一个元素的值，未找到则返回 undefined
  -->
  <script>
    var names = [
      { name: 'ming' },
      { name: 'lili' },
      { name: 'aiqing' },
      { name: 'xiaoqing' },
    ];
    var result = names.find(function (item, idx, arr) {
      // 返回一个真值表示已经找到了匹配的元素
      // 确定返回值后立即停止迭代
      return item.name === 'ming';
    });
    console.log(result); // {name: 'ming'}
  </script>

  <!-- 
    Array.prototype.findIndex(fn, this)
    查找元素满足测试函数第一个元素的索引值，未找到则返回 -1
  -->
  <script>
    var arr = [1, 2, 11, 12];
    var result = arr.findIndex(function (item, idx, arr) {
      // 返回一个真值表示已经找到了匹配的元素
      // 确定返回值后立即停止迭代
      return item % 2 === 0;
    });
    console.log(result); // 1
  </script>

  <!-- 
    Array.prototype.some(fn, this)
    测试数组中至少有一个元素通过了测试函数则返回 true 否则返回 false
  -->
  <script>
    var arr = [10, 11, 3];
    var result = arr.some(function (item, idx, arr) {
      // 返回一个真值表示元素项通过了测试
      // 确定返回值后立即停止迭代
      return item % 2 === 0;
    });
    console.log(result); // true

    var falsey = [0, '', NaN, undefined, null, false];
    var result1 = falsey.some(Boolean);
    console.log(result1); // false
  </script>

  <!--  
    Array.prototype.every(fn, this)
    测试数组中所有元素通过了测试函数则返回 true 否则返回 false
  -->
  <script>
    var arr = [10, 11, 3];
    var result = arr.every(function (item, idx, arr) {
      // 返回一个真值表示元素项通过了测试
      // 确定返回值后立即停止迭代
      return item >= 10;
    });
    console.log(result); // false
  </script>

  <!--  
    Array.prototype.filter(fn, this)
    浅拷贝数组，保留通过测试函数的元素项，返回一个新数组
  -->
  <script>
    var arr = [12, 5, 8, 130, 44];
    var result = arr.filter(function (item, idx, arr) {
      // 每一个元素都会调用测试函数
      return item >= 10;
    });
    console.log(result); // [12, 130, 44]
  </script>

  <!--  
    Array.prototype.map(fn, this)
    创建一个新数组，数组组中每一项元素都会调用函数，保留调用后的返回值
  -->
  <script>
    var arr = [2, 3, 4];
    var result = arr.map(function (item, idx, arr) {
      return (item *= 2);
    });
    console.log(result); // [4, 6, 8]
  </script>

  <!--  
    Array.prototype.forEach(fn, this)
    迭代数组，使数组中每一项元素执行一次函数，返回值是 undefined
    不会改变原数组
  -->
  <script>
    var arr = [1, 2, 3];
    arr.forEach(function (item, idx, arr) {
      item *= 2;
    });
    console.log(arr); // [1, 2, 3]
  </script>

  <!--  
    Array.prototype.reduce(reducer, initValue)
    reducer = function (pre, next, idx, arr) {}
      pre = 上一次调用的结果，如果指定了 initValue 则是指定值，否则就是 arr[0] 的值
      next = 当前元素的值，如果指定了 initValue 则是 arr[0]，否则就是 arr[1] 的值
      idx = 正在处理元素的下标索引
      arr = 调用了 reduce 方法的数组本身
    遍历数组元素，每一步都将当前元素的值与前一步的结果相加，最终返回值是累积的结果
  -->
  <script>
    var arr = [4, 5, 6];
    var result = arr.reduce(function (pre, next) {
      return (pre += next);
    });
    console.log(result); // 15
  </script>
</html>
