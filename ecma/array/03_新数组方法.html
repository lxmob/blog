<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>新数组方法</title>
  </head>
  <body></body>

  <!--  
    join()
    作用：数组转字符串，通过传递的参数作为分隔符进行连接，不传递默认以逗号分隔
    返回值：拼接后的字符串
    影响：不改变原数组
  -->
  <script>
    var arr = ['Wind', 'Rain', 'Fire'];
    console.log(arr.join()); // "Wind,Rain,Fire"
    console.log(arr.join('')); // "WindRainFire"
    console.log(arr.join(0)); // "Wind0Rain0Fire"

    // 源码实现
    Array.prototype.join = function (spt = '') {
      var str = this[0]
      for (var i = 1; i < this.length; i++) {
        str += `${spt}${this[i]}`;
      }
      return str;
    };
  </script>

  <!-- 
    concat(...args) 
    作用：合并数组，参数可以是值或者数组
    返回值：合并后的新数组
    影响：不改变原数组
  -->
  <script>
    var arr = [4, 5, 6];
    console.log(arr.concat(1, 2, 3)); // [4, 5, 6, 1, 2, 3]
    console.log(arr.concat([1, 2], {})); // [4, 5, 6, 1, 2, {}]

    // 源码实现
    Array.prototype.concat = function () {
      var nArr = [...this];
      for (var i = 0; i < arguments.length; i++) {
        var cur = arguments[i];
        Array.isArray(cur) ? nArr.push(...cur) : nArr.push(cur);
      }
      return nArr;
    };
  </script>

  <!--  
    slice(start, end)
    作用：浅拷贝数组，包括 start 但不包括 end
    返回值：新的数组
    影响：不改变原数组
  -->
  <script>
    var arr = ['ming', 1, 2, 3, 'lili', NaN];
    console.log(arr.slice(2)); // [2, 3, 'lili', NaN]
    console.log(arr.slice(2, 4)); // [2, 3]
    console.log(arr.slice(-1, 2)); // []
    console.log(arr.slice(-2)); // ['lili', NaN]

    var arr1 = [{ name: 'ming' }, 10, 11];
    var arr2 = arr1.slice(0, 1);
    arr2[0].name = 'lili';
    console.log(arr2, arr1); // {name: 'lili'}
  </script>

  <!-- 
    indexOf(value, fromIndex) 
    作用：查找指定元素位置
    返回值：查找到元素第一次出现时的下标，如果没有找到返回 -1
  -->
  <script>
    var arr = [4, 5, 5, 6];
    console.log(arr.indexOf(5)); // 1
    console.log(arr.indexOf(1)); // -1
    console.log(arr.indexOf(5, 2)); // 2

    // 源码实现
    Array.prototype.indexOf = function (tar) {
      var arg1 = arguments[1],
          i = arg1 ? arg1 : 0,
          ans = -1;
      for (; i < this.length; i++) {
        if (tar === this[i]) {
          ans = i;
          break;
        }
      }
      return ans;
    };
  </script>

  <!--  
    includes(value, fromIndex)
    作用：判断一个数组是否包含一个指定的值
    返回值：布尔值
  -->
  <script>
    var arr = [4, 5, 6];
    console.log(arr.includes(4)); // true
    console.log(arr.includes(1)); // false
    // 索引大于数组长度则直接返回 false
    console.log(arr.includes(6, 4)); // false
    console.log(arr.includes(5, -100)); // true

    // 源码实现
    Array.prototype.includes = function (tar) {
      var arg1 = arguments[1],
          i = arg1 ? arg1 : 0,
          ans = false;
      for (; i < this.length; i++) {
        if (tar === this[i]) {
          ans = true;
          break;
        }
      }
      return ans;
    };
  </script>
</html>
