<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>innerHTML</title>
    <style>
      /* .text {
        display: none;
      } */
    </style>
  </head>
  <body>
    <div id="wrapper">
      <span class="text">123</span>
    </div>
  </body>
  <script>
    // 🌟 Element.prototype.innerHTML 设置和获取元素 HTML
    var wrap = document.getElementById('wrapper')
    // wrap.innerHTML = '<h2>123</h2>'
    // console.log(wrap.innerHTML)
    // console.log(wrap.textContent)

    /**
     *  父节点 HTML不要写错
     *  innerHTML -> HTML字符串不要写
     *  document.innerHTML -> 身上没有这个属性 -> document.documentElement
     *  innerHTML -> 元素内部的所有内容都会被删除
     *  outerHTML -> 替换掉包含父元素的所有内容
     */

    // 🌰 通过 innerHTML 来获取代码进行标签代码原样输出
    // var code = document.documentElement.innerHTML.replace(/\</g, '&lt;')
    // document.documentElement.innerHTML = '<pre>' + code + '</pre>'

    // 🌟 通过设置 innerHTML 发生了什么？

    /**
     * innerHTML = '<h2>123</h2>'
     * <h2>123</h2> 解析为HTML文档结构
     * 通过DocumentFragment将这个HTML文档结构创建为DOM节点
     * 原本父节点上的所有内容都会被替换成这个节点
     */

    // 🌟 安全问题
    // HTML5和现代新的浏览器都会阻止通过innerHTML嵌入script脚本程序的执行
    // wrap.innerHTML = '<img src="" onerror="alert(123)" />'

    // 🌟 替换后文档结构后无法再去操作之前的引用
    // var oText = document.querySelector('.text')
    // wrap.innerHTML += 'text'
    // oText.style.color = 'red'
    // document.querySelector('.text').style.color = 'red'

    /**
     * 插入纯文本的时候，不要使用innerHTML
     * Node.prototype.textContent
     * 它只会将文本插入到元素当中去，不会解析html文档
     */
    // wrap.textContent = '<h2>textContent</h2>'

    // 🌟 HTMLElement.prototype.innerText 给元素渲染文本节点
    // wrap.innerText = '123'

    // 🌟 innerText和textContent的区别

    /**
     * textContent获取所有元素的内容 script style
     * innerText只会获取文本内容
     * innerText会受到css的影响，display:none -> reflow
     *
     */
    console.log('innerText:',document.documentElement.innerText)
    console.log('textContent:',document.documentElement.textContent)
  </script>
</html>
