什么是智能合约？
http://zhenxiao.com/blockchain/22-ETH.pdf

DAO去中心化自治组织(decentralized autonomous organization)

TheDAO致力于众筹组织，众筹投资基金用来投资项目
本质上是运行在以太坊上面的智能合约，如果你想投资TheDAO可以将以太币发送给这个智能合约
然后可以换回TheDAO的代币，通过这些代币需要投资哪个项目的时候是由大家投票决定的

TheDAO事件
指TheDAO发布的智能合约代码中存在bug，在发生转账交易时没有把账户余额清零
而是先递减后清零，这种方式导致遭受黑客攻击，盗走了5000万美元
对于黑客来说不认为这是一个bug，而是认为是代码中的一个feature
后续vitalik为了将TheDAO损失的币，在区块中回滚，这样就违背了去中心化的思想
可能TheDAO对于以太坊来说，造成了很大的影响，大到TheDAO不能这样倒下去
最终以太坊开发团队决定进行回滚，在回滚的区块中添加了一条新规则凡是与TheDAO相关的交易
都不进行处理，但是这个升级导致了后续gas fee也出现了bug，造成了大量的DOS(denial of service attack)
导致矿工处理区块速度大幅度增加，许多矿工又回滚软件升级改成原来的版本，导致软分叉方案失败

以太坊TheDAO中对于子基金成立有28天的账户锁定期
过了这个时间黑客就可以把钱取走了，软分叉方案失败后，留给小v的时间不多了
通过社区的激烈讨论最终还是选择硬分叉，将TheDAO账户上的资金全部转移到新的智能合约中
新的智能合约中只有一个功能就是退钱，将购买的TheDAO代币退回成以太币
这个过程是不需要用户同意的，不需要数字签名，强制将用户的代币转入到新的智能合约中

强制分叉后的两条新链会导致重放攻击
为了解决这个硬分叉所导致的问题，在两条链上增加一个chainID来标识新旧链

ICO项目
initial coin offering这种代币的形式没有自己的区块链
通过以太坊智能合约的形式运行在以太坊evm平台上面
发行代币的智能合约对应以太坊状态树中的某一个节点
这个节点有自己的账户余额，就相当于这个智能合约一共有多少个以太币
在这个合约中每个账户中有多少代币，这个作为存储树中的变量，存储在智能合约的账户中
代币的转账、发行、销毁都是调用智能合约中函数来实现，不需要像以太坊一样维护自己的基础链

美链(beauty chain)事件
http://zhenxiao.com/blockchain/25-ETH.pdf
