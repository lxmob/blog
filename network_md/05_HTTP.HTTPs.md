### HTTP 和 HTTPs 是什么

- HyperText Transfer Protocol 超文本传输协议
  - 按照协议规则先向 WEB 服务器发送请求，将超文本传输至浏览器本地
- HyperText Transfer Protocol Secure 超文本传输安全协议
  - 基于 SSL/TLS 安全版，为网络通信提供安全及数据完整性的一种协议，对网络连接进行加密
  - SSL：Secure Sockets Layer 安全套接层
  - TLS：Transport Layer Security 传输层安全
- 两者区别
  - HTTP 是不安全的（监听和中间人攻击等手段，获取网站账户信息和敏感信息）HTTPS 可防止被攻击
  - HTTP 协议传输内容都是明文，直接在 TCP 连接上运行，对于事务处理没有记忆能力，客户端和服务器都无法验证对方身份
  - HTTPs 协议传输内容通过 SSL/TLS 加密，并且运行在 SSL/TLS 上，SSL/TLS 运行在 TCP 连接上，所以数据传输是安全的

### HTTP 报文

```
请求行:
  请求方式[空格]url[空格]协议版本(1.0/2.0)
  [回车符/换行符]
请求头:
  头部字段:值[回车符/换行符]
  头部字段:值[回车符/换行符]
  [回车符/换行符]
请求体:
  请求数据格式

响应行:
  协议版本(1.0/2.0)[空格]状态码[空格]状态标识
  [回车符/换行符]
响应头:
  头部字段:值[回车符/换行符]
  头部字段:值[回车符/换行符]
  [回车符/换行符]
响应体:
  响应数据格式
```

### HTTP 长连接和短连接

- 短连接：每次请求一个资源就建立连接，请求完成后连接立马关闭
- 长连接：只建立一次连接，多次资源请求都会复用该连接，完成后关闭

### HTTP/0.9

- 只能发送 GET 请求
- 只能请求 HTML 格式的数据

### HTTP/1.0

- 增加了 POST、HEAD 请求方式
- 支持多种数据格式的请求
- 支持 cache 缓存功能
- 新增状态码、多字符集支持、内容编码等
- 早期 HTTP/1.0 不支持 keep-alive 长连接，只支持串行连接（短连接）
- 后期 HTTP/1.0 开始支持长连接，增加 Connection：keep-alive 字段（非标准字段）

### HTTP/1.1

- 增加持久化连接（默认开启 Connection：keep-alive）
- 增加管道化机制（支持多个请求同时发送）
- 增加 PUT、DELETE、PATCH、OPTIONS 请求方法
- 增加 HOST 字段（指定服务器域名）
- 增加 100 状态码（continue）支持只发送头部信息请求
- 增加身份认证机制
- 支持传送内容的一部分和文件断点续传
- 新增 24 个错误状态码
- 缺点对带宽的利用率不理想
  - TCP 慢启动
  - 同时建立起多条 TCP 连接，争抢网络带宽资源
  - 队头阻塞，限行管道队列

### HTTP/2.0

- 二进制帧协议（头信息与数据体使用二进制进行传输）
- 增加双工模式（客户端同时发送多个请求，服务端同时处理多个请求）
- 头部信息压缩机制（每次请求都会带上所有信息发送给服务端）
- 服务端推送（服务器会把客户端需要的资源一起推送到客户端，合适加载静态资源）
- 多工模式（处理请求时先响应已处理好的部分，再响应其他请求，最后再解决没有处理好的部分）
